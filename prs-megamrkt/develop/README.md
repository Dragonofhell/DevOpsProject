# Описание
Утилита принимает на вход ссылку ( в т.ч. с фильтрами) и разбирает данные в формате:
- Наименование
- Цена 
- Процент кешбека 
- Количество баллов 
- Реальная цена ( Цена - кешбек) 
- Ссылка на товар

# Требования
## Необходимые библиотеки Python
Centos 7:
sudo pip3 install selenium bs4 beautifulsoup4 pandas openpyxl

 - selenium
 - bs4  
 - BeautifulSoup
 - time  
 - datetime  
 - pandas 
 - urllib.parse
 - json
 - random
 - openpyxl
 - ...

## Selenium 
https://github.com/mozilla/geckodriver/releases/
Скачать релиз на текущую версию ОС. Необходимо при указании пути в driver_path ( например driver_path = r'E:\\geckodriver.exe')
# Заметки
## 1.0.0
- Ссылку необходимо указывать в коде.
- В функции fetch_data(url) намеренно используется ожидание в 5 секунд. Необходимо для корректного отображения html при обработке ссылки с filter
- Файл Excel формируется в той же директории, где создан проект 
- Наименование файла формируется из ссылки + текущая дата
## 1.0.1
- Добавлен ввод ссылки из командной строки
- Ссылки теперь попадают в файл в виде гиперссылок
- мелкие исправления и чистка кода

# Develop
## 1.0.0
- Переработан подход в обработке данных. Теперь сканируется каждая страница с товаром.

## 1.0.1
- Добавлено использование рандомного агента при запуске браузера
- Случайное время sleep
- В вывод добавлена информация о реальной цене
- Добавлено сохранение cookie  после завершения работы кода и загрузка их при запуске
- Ссылка на категорию товара запрашивается при старте программы

## 1.0.2
- Добавлена обработка нескольких ссылок, ввод через запятую

## 1.0.3
- Набор ссылок хранится в файле urls.txt , разделитель - строка
- Добавлен подсчет количества ссылок при переборе страниц
- Добавлена обработка "Товара нет в наличии" и "404"
- Добавлено ожидание при редиректе на страницу с вводом капчи

## 1.0.4
- Удалена функция с загрузкой и сохранением cookies
- Переработан сценарий обхода капчи
- Удалено указание драйвера (Windows)
- Для чтения ссылок необходимо создать папку config и файл urls.txt
- прочие исправления

## 1.0.5
Минимальный набор для запуска:
В директории с исполняемым скриптом создана папка config.
В директории config присутствуют файлы urls.txt и config.json
В директории config создана папка из параметра result_dir
- Добавлена функция отправки уведомлений в Telegram
- Добавлен config.json для настройки Telegram уведомлений, а также для сохранения данных после выполнения:
Параметр | Описание | Пример
----------|----------|----------
| result_dir    | Директория для сохранения результатов выполнения   | "config/results_excel"   |
| min_bonus_amount    | Минимальный кешбек (в %), при котором отработает отправка уведомления  | "75"   |
| best_bonus_amount    | Самые выгодные условия по кешбеку(например при выборе min_bonus_amount, отправлять в отдельного бота только те товары, где кешбек 75%+)    | "75"   |
| tokenid_top    | Отправка уведомлений через чат-бота с очень выгодными кешбеками ( применяется для best_bonus_amount).   | "6441:AAGBVssAqa1S"   |
| tokenid    | Отправка уведомлений через чат-бота  ( применяется для min_bonus_amount).   | "6486:qAXASGBVz6s9UKs"   |
| chat_id    | id чата, можно узнать из https://api.telegram.org/bot{tokenid}/getUpdates, предварительно отправив сообщение в чат-бот вручную   | 329291   |
- Убраны лишние функции
- добавлены примеры файлов в папки config

